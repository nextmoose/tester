name: "Test"
on:
  push:
jobs:
  pre-check:
    runs-on: ubuntu-latest
    steps:
    - run: true
  check:
    needs: pre-check
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - uses: cachix/install-nix-action@v17
      with:
        extra_nix_config: |
          access-tokens = github.com=${{ secrets.TOKEN }}
    - run: cd $( mktemp --directory ) && git init && git config user.name "No User" && git config user.email "noone@nothing" && nix flake init && sed -e "s#\${IMPLEMENTATION}#${GITHUB_WORKSPACE}#" -e "s#\${TEST}#github:nextmoose/tester-test#" -e "s#\${TESTER}#${GITHUB_WORKSPACE}#" -e "wflake.nix" /home/runner/work/tester/tester/.github/workflows/flake.nix && git add flake.nix && git commit --all --allow-empty-message --message "" && nix develop --command check ""
